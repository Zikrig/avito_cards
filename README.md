# Бот карточек Авито (aiogram)

Телеграм-бот принимает 1–3 фотографии товара, текстовое описание характеристик и цену, затем собирает одну PNG-карточку для объявления на Авито.

## Возможности

- **1–3 фото**: слева на карточке.
  - 1–2 фото: идут друг под другом по вертикали.
  - 3 фото: одно сверху, два поменьше снизу в ряд.
- Справа: блок описания (с обводкой) и блок цены (с обводкой и обводкой текста).
- Цвет фона, размер итогового изображения, толщина промежутков между фотографиями и прочие параметры задаются в `config.json`.
- Рендер: HTML/CSS → PNG через Playwright (Chromium).

## Установка

1. Создать виртуальное окружение (по желанию):
   - Windows PowerShell: `python -m venv .venv` → `.venv\Scripts\Activate.ps1`
2. Установить зависимости: `pip install -r requirements.txt`
3. Установить Chromium для Playwright: `python -m playwright install chromium`
4. Токен бота — через `.env` (рекомендуется) или в `config.json`.
   - Скопируйте `.env.example` в `.env` и укажите: `BOT_TOKEN=ваш_токен_от_BotFather`
5. Запуск: `python main.py`

## Использование бота

1. `/start`
2. Отправить 1, 2 или 3 фото по одному.
3. Отправить `/done`
4. Отправить текстовое описание характеристик товара.
5. Отправить цену (например: `12 990 ₽`).
6. Бот пришлёт готовую PNG-карточку.

`/cancel` — отмена текущего сценария.

## Конфиг

- **Токен бота**: переменная окружения `BOT_TOKEN` (файл `.env` в корне проекта) или поле `bot_token` в `config.json`. Предпочтительно использовать `.env`, чтобы не коммитить токен в репозиторий (`.env` добавлен в `.gitignore`).

- **config.json** — размеры, цвета, отступы:

- **output**
  - `width`, `height` — размер итоговой картинки (пиксели).
  - `background_color` — цвет фона карточки.
  - `padding` — отступ от краёв карточки.
  - `gap` — отступ между левой колонкой (фото) и правой (описание/цена), а также между блоком описания и ценой.
  - `photo_gap` — толщина промежутков между фотографиями в левой колонке.
  - `photo_grid_border_radius` — скругление углов области с фото.
  - `left_column_ratio` — доля ширины карточки под фото (0.45 = 45%).
- **cards.price_block** — фон, цвет текста, обводка блока, обводка текста цены (`border`, `text_stroke_*`), шрифт, отступы.
- **cards.description_block** — обводка, фон, шрифт, отступы для блока описания.
